<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>漢 HSK Flashcards — Learn Mandarin</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400;0,500;0,600;1,400;1,500&family=Noto+Serif+SC:wght@300;400;500;700&family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&display=swap" rel="stylesheet">
<style>
  :root {
    --cream: #f0ebe0; --cream-dark: #e5dfd2; --cream-mid: #ede8dc;
    --gold: #8b6914; --gold-light: #c4a035; --gold-faint: rgba(139,105,20,0.08);
    --red: #8b1a1a; --red-light: #c0392b;
    --ink: #2c2416; --ink-light: #5a4e3a; --ink-muted: #8a7a62;
    --green: #2d5a3d; --card-bg: #faf7f2; --border: rgba(139,105,20,0.18);
  }
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body {
    font-family: 'EB Garamond', Georgia, serif;
    background: var(--cream);
    color: var(--ink);
    min-height: 100vh;
    display: flex;
    flex-direction: column;
  }

  /* ── Header ── */
  header {
    background: var(--cream);
    border-bottom: 1px solid var(--border);
    padding: 0 48px;
    display: flex; align-items: center; justify-content: space-between;
    height: 64px; position: sticky; top: 0; z-index: 10;
  }
  .logo { display: flex; align-items: center; gap: 12px; text-decoration: none; }
  .logo-char { font-family: 'Noto Serif SC', serif; font-size: 32px; color: var(--red); font-weight: 700; line-height: 1; }
  .logo-text { font-size: 11px; letter-spacing: 0.22em; color: var(--ink-muted); text-transform: uppercase; }
  .header-right { display: flex; align-items: center; gap: 12px; }
  .user-avatar { width: 32px; height: 32px; border-radius: 50%; border: 2px solid var(--border); background: var(--cream-dark); display: flex; align-items: center; justify-content: center; font-family: 'Noto Serif SC', serif; font-size: 14px; color: var(--gold); overflow: hidden; }
  .user-avatar img { width: 100%; height: 100%; object-fit: cover; }
  .user-name { font-size: 14px; color: var(--ink-light); }
  .sign-out-btn { border: 1px solid var(--border); background: none; border-radius: 30px; padding: 5px 14px; font-family: 'EB Garamond', serif; font-size: 13px; color: var(--ink-muted); cursor: pointer; transition: all 0.2s; }
  .sign-out-btn:hover { border-color: var(--red); color: var(--red); }

  /* ── Hero ── */
  .hero {
    flex: 1;
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    padding: 60px 24px 48px;
    text-align: center;
    position: relative;
    overflow: hidden;
  }
  .hero::before {
    content: '中';
    font-family: 'Noto Serif SC', serif;
    font-size: clamp(200px, 35vw, 420px);
    font-weight: 700;
    color: rgba(139,26,26,0.04);
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    pointer-events: none;
    user-select: none;
    line-height: 1;
  }
  .hero-eyebrow {
    font-size: 11px; letter-spacing: 0.3em; color: var(--gold);
    text-transform: uppercase; margin-bottom: 20px;
    animation: fadeUp 0.6s ease both;
  }
  .hero-title {
    font-family: 'Playfair Display', serif;
    font-size: clamp(28px, 5vw, 52px);
    color: var(--ink);
    line-height: 1.2;
    max-width: 700px;
    margin-bottom: 16px;
    animation: fadeUp 0.7s 0.1s ease both;
  }
  .hero-title em { font-style: italic; color: var(--red); }
  .hero-sub {
    font-size: clamp(16px, 2vw, 20px);
    color: var(--ink-muted);
    font-style: italic;
    max-width: 520px;
    line-height: 1.6;
    margin-bottom: 56px;
    animation: fadeUp 0.7s 0.2s ease both;
  }

  /* ── Choice cards ── */
  .choices {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 340px));
    gap: 24px;
    justify-content: center;
    width: 100%;
    max-width: 760px;
    animation: fadeUp 0.7s 0.3s ease both;
    position: relative;
    z-index: 1;
  }
  .choice-card {
    background: var(--card-bg);
    border: 1px solid var(--border);
    border-radius: 6px;
    padding: 36px 32px;
    text-decoration: none;
    color: inherit;
    display: flex; flex-direction: column; align-items: flex-start;
    transition: all 0.28s cubic-bezier(0.2, 0.8, 0.3, 1);
    cursor: pointer;
    position: relative;
    overflow: hidden;
  }
  .choice-card::before {
    content: '';
    position: absolute; inset: 0;
    background: linear-gradient(135deg, var(--gold-faint) 0%, transparent 60%);
    opacity: 0;
    transition: opacity 0.3s;
  }
  .choice-card:hover { transform: translateY(-4px); box-shadow: 0 16px 48px rgba(44,36,22,0.12), 0 4px 16px rgba(139,105,20,0.1); border-color: var(--gold-light); }
  .choice-card:hover::before { opacity: 1; }
  .choice-card:active { transform: translateY(-2px); }

  .choice-icon {
    font-family: 'Noto Serif SC', serif;
    font-size: 52px;
    color: var(--red);
    line-height: 1;
    margin-bottom: 20px;
    display: block;
    filter: drop-shadow(0 2px 8px rgba(139,26,26,0.15));
    transition: transform 0.3s;
  }
  .choice-card:hover .choice-icon { transform: scale(1.08) rotate(-2deg); }

  .choice-label {
    font-size: 10px; letter-spacing: 0.25em; text-transform: uppercase;
    color: var(--gold); margin-bottom: 8px;
  }
  .choice-title {
    font-family: 'Playfair Display', serif;
    font-size: 24px; color: var(--ink);
    margin-bottom: 10px;
  }
  .choice-desc {
    font-size: 15px; color: var(--ink-muted);
    line-height: 1.55; flex: 1;
    font-style: italic;
  }
  .choice-cta {
    margin-top: 24px;
    display: flex; align-items: center; gap: 8px;
    font-size: 14px; color: var(--gold);
    letter-spacing: 0.06em;
    transition: gap 0.2s;
  }
  .choice-card:hover .choice-cta { gap: 12px; }
  .choice-cta svg { width: 16px; height: 16px; transition: transform 0.2s; }
  .choice-card:hover .choice-cta svg { transform: translateX(2px); }

  /* ── Footer ── */
  footer {
    text-align: center;
    padding: 24px;
    font-size: 13px;
    color: var(--ink-muted);
    border-top: 1px solid var(--border);
  }
  footer a { color: var(--gold); text-decoration: none; }

  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(18px); }
    to   { opacity: 1; transform: translateY(0); }
  }
  @media (max-width: 600px) {
    header { padding: 0 20px; }
    .hero { padding: 40px 20px 32px; }
    .choices { grid-template-columns: 1fr; max-width: 360px; }
    .user-name { display: none; }
  }
</style>
</head>
<body>
<header>
  <a class="logo" href="/home">
    <div class="logo-char">漢</div>
    <div class="logo-text">HSK Flashcards</div>
  </a>
  <div class="header-right">
    <div class="user-avatar" id="userAvatar">漢</div>
    <span class="user-name" id="userName"></span>
    <button class="sign-out-btn" onclick="signOut()">Sign out</button>
  </div>
</header>

<main class="hero">
  <div class="hero-eyebrow">Your journey starts here</div>
  <h1 class="hero-title">Learning Mandarin is not as <em>difficult</em> as you think</h1>
  <p class="hero-sub">We're here to help. What would you like to do today?</p>

  <div class="choices">
    <a class="choice-card" href="/app">
      <span class="choice-icon">學</span>
      <div class="choice-label">Study</div>
      <div class="choice-title">Flashcards</div>
      <p class="choice-desc">Master all 5,000 official HSK vocabulary words across six levels using spaced repetition.</p>
      <div class="choice-cta">
        Start studying
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
      </div>
    </a>

    <a class="choice-card" href="/conversation">
      <span class="choice-icon">說</span>
      <div class="choice-label">Speak</div>
      <div class="choice-title">Conversational Starters</div>
      <p class="choice-desc">Twenty essential phrases to start speaking Mandarin in real situations — from greetings to ordering food.</p>
      <div class="choice-cta">
        Start speaking
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
      </div>
    </a>
  </div>
</main>

<footer>
  <a href="/dashboard">View your analytics</a> &nbsp;·&nbsp;
  5,000 words across HSK 1–6
</footer>

<script>
async function loadUser() {
  try {
    const res = await fetch('/auth/me');
    if (!res.ok) { window.location.href = '/login'; return; }
    const user = await res.json();
    document.getElementById('userName').textContent = user.name?.split(' ')[0] || '';
    const av = document.getElementById('userAvatar');
    if (user.avatar) {
      av.innerHTML = `<img src="${user.avatar}" alt="${user.name}" style="width:100%;height:100%;object-fit:cover;border-radius:50%">`;
    } else {
      av.textContent = (user.name?.[0] || '漢').toUpperCase();
    }
  } catch { window.location.href = '/login'; }
}
async function signOut() {
  await fetch('/auth/logout', { method: 'POST' });
  window.location.href = '/login';
}
loadUser();
</script>
</body>
</html>
